<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ShowUI-&pi;: Flow-based Generative Models as GUI Dexterous Hands</title>
  <meta name="description"
    content="ShowUI-&pi; is a 450M flow-based vision-language-action model for unified drag and click control with the ScreenDrag benchmark.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="index.css">
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
</head>

<body>
  <div class="container">
    <div class="header-group">
      <h1 class="main-title">ShowUI-&pi;: Flow-based Generative Models as GUI Dexterous Hands</h1>
      <p class="subtitle1">Unified discrete-continuous actions for free-form drag computer use</p>
      <p class="subtitle2">Siyuan Hu<sup>â€ </sup>, Kevin Qinghong Lin<sup>â€ </sup>, Mike Zheng Shou<sup>*</sup></p>
      <p class="subtitle2"><span class="affil">Show Lab, National University of Singapore</span><br><span
          class="affil">â€  Equal contribution * Corresponding author</span></p>
      <div class="button-group">
        <a class="btn" href="javascript:void(0);">Paper</a>
        <a class="btn" href="https://github.com/showlab/showui" target="_blank" rel="noopener noreferrer">Code</a>
        <a class="btn" href="javascript:void(0);">ðŸ¤—Dataset</a>
      </div>
    </div>

    <div class="figure">
      <video class="figure-video" controls muted playsinline loop preload="metadata" autoplay>
        <source src="assets/teaser_dynamic.mp4" type="video/mp4">
      </video>
      <!-- <picture>
        <source srcset="figures/showui_teaser.svg" type="image/svg+xml">
        <img src="figures/showui_teaser_hd.png" alt="ShowUI-pi teaser">
      </picture> -->
    </div>

    <p class="body-text-highlight">
      ShowUI-&pi; is a 450M flow-based vision-language-action model that treats GUI actions as continuous trajectories,
      generating smooth clicks and drags directly from screen observations. It unifies discrete and continuous actions,
      enabling precise drawing, rotation, sorting, and captcha solving without tokenized coordinates.
    </p>

    <div class="stats-container">
      <div class="stat-item">
        <div class="stat-number">20K</div>
        <div class="stat-label">Recorded drag trajectories</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">505</div>
        <div class="stat-label">Tasks across five domains</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">0.45B</div>
        <div class="stat-label">Parameters in ShowUI-&pi;</div>
      </div>
    </div>

    <div class="content-group" id="abstract">
      <h2 class="content-title">Abstract</h2>
      <p class="body-text">
        Existing GUI agents predict discrete click coordinates, limiting them to short drags and preventing closed-loop,
        fine-grained control. ShowUI-&pi; is a flow-based generative model that unifies clicks and continuous drags as
        sequences of cursor waypoints with mouse states. A lightweight action expert trained with flow matching outputs
        incremental cursor deltas conditioned on streaming visual observations, yielding stable trajectories for tasks
        such
        as drawing, rotation, and captcha solving. We also introduce ScreenDrag: 505 real drag tasks across PowerPoint,
        OS/file manager, Premiere Pro, captchas, and handwriting, plus 20K manually collected and synthesized
        trajectories
        with dense coordinates for training and evaluation. ShowUI-&pi; achieves 26.98% online success and the lowest
        trajectory error with only 450M parameters.
      </p>
    </div>

    <div class="figure">
      <picture>
        <source srcset="figures/showui_overview.svg" type="image/svg+xml">
        <img src="figures/showui_overview_hd.png" alt="ShowUI-pi architecture overview">
      </picture>
    </div>

    <div class="content-group" id="screendrag">
      <h2 class="content-title">ScreenDrag Benchmark</h2>
      <p class="body-text">
        ScreenDrag targets continuous GUI manipulation with offline and online protocols. It covers 505 tasks (101 per
        domain) across PowerPoint, OS/file manager, Adobe Premiere Pro, captcha rotation, and handwriting. Training data
        mixes 20K human and synthetic trajectories with dense cursor coordinates, enabling models to learn long-horizon,
        smooth motion.
      </p>
      <div class="figure">
        <picture>
          <source srcset="figures/showui_data.svg" type="image/svg+xml">
          <img src="figures/showui_data_hd.png" alt="ScreenDrag data pipeline">
        </picture>
      </div>
      <div class="figure chart-figure">
        <div id="data-distribution-chart" class="distribution-chart"></div>
        <script>
          (function () {
            var chartDom = document.getElementById('data-distribution-chart');
            var myChart = echarts.init(chartDom);
            var option;

            // Colors (Calculated from LaTeX mixes)
            // ppt: #F4A7B9
            // osfm: #EED59C
            // hand: #A9C6FF
            // prem: #CDB4DB
            // captcha: #A8E6CF

            // Mix function approximation: color * p + white * (1-p)
            // ppt!82!white -> #F6B7C6
            // ppt!65!white -> #F9D3DD
            // ppt!48!white -> #FCE4EA
            // osfm!78!white -> #F1DEB2
            // osfm!58!white -> #F6EBCF
            // hand!78!white -> #BDD2FF
            // hand!58!white -> #D4E2FF
            // prem!70!white -> #DBCBE6
            // captcha!80!white -> #B9EBD9
            // captcha!62!white -> #C9F0E1
            // captcha!44!white -> #D9F5E9

            var dataInner = [
              { value: 20, name: 'PowerPoint\n(20%)', itemStyle: { color: '#F4A7B9' } },
              { value: 20, name: 'OS & File Manager\n(20%)', itemStyle: { color: '#EED59C' } },
              { value: 20, name: 'Handwriting\n(20%)', itemStyle: { color: '#A9C6FF' } },
              { value: 20, name: 'Adobe Premiere Pro\n(20%)', itemStyle: { color: '#CDB4DB' } },
              { value: 20, name: 'Captcha\n(20%)', itemStyle: { color: '#A8E6CF' } }
            ];

            var dataOuter = [
              // PPT
              { value: 6.7, name: 'Rotate\n(6.7%)', itemStyle: { color: '#F6B7C6' } },
              { value: 6.7, name: 'Resize Diagonally\n(6.7%)', itemStyle: { color: '#F9D3DD' } },
              { value: 6.7, name: 'Resize H/W\n(6.7%)', itemStyle: { color: '#FCE4EA' } },
              // OS
              { value: 15.0, name: 'OS Desktop\n(15.0%)', itemStyle: { color: '#F1DEB2' } },
              { value: 5.0, name: 'Explorer\n(5.0%)', itemStyle: { color: '#F6EBCF' } },
              // Hand
              { value: 10.0, name: 'Name\n(10.0%)', itemStyle: { color: '#BDD2FF' } },
              { value: 10.0, name: 'Phrase\n(10.0%)', itemStyle: { color: '#D4E2FF' } },
              // Prem
              { value: 20.0, name: 'Adobe Premiere Pro\n(20.0%)', itemStyle: { color: '#DBCBE6' } },
              // Captcha
              { value: 6.7, name: 'Rotate\n(6.7%)', itemStyle: { color: '#B9EBD9' } },
              { value: 6.7, name: 'Drag-and-Drop\n(6.7%)', itemStyle: { color: '#C9F0E1' } },
              { value: 6.7, name: 'Slider\n(6.7%)', itemStyle: { color: '#D9F5E9' } }
            ];

            // Images (placed at specific angles)
            // PPT: 126 deg (Top-Leftish) -> ECharts starts at 90 (Top) and goes clockwise? No, ECharts starts at 12 o'clock (90deg) is 0?
            // ECharts pie startAngle is 90 by default (12 o'clock).
            // LaTeX: 90 deg is Top.
            // PPT: 90 to 90+72 = 162. Mid = 126.
            // OS: 162 to 234. Mid = 198.
            // Hand: 234 to 306. Mid = 270.
            // Prem: 306 to 378 (18). Mid = 342.
            // Cap: 18 to 90. Mid = 54.

            // We need to map these angles to ECharts coordinates.
            // ECharts 0 is at 12 o'clock if startAngle is 90? No, standard polar: 0 is 3 o'clock.
            // Let's set startAngle: 180 (9 o'clock) -> 90 (12 o'clock).
            // Let's stick to LaTeX angles: Start at 90 (12 o'clock) and go CCW (counter-clockwise).
            // ECharts goes Clockwise by default. We can set `clockwise: false` and `startAngle: 90`.

            option = {
              tooltip: { trigger: 'item' },
              series: [
                {
                  name: 'Inner',
                  type: 'pie',
                  radius: [0, '35%'],
                  center: ['50%', '50%'],
                  startAngle: 90,
                  clockwise: false,
                  itemStyle: {
                    borderColor: '#fff',
                    borderWidth: 2,
                    shadowBlur: 5,
                    shadowOffsetX: 0,
                    shadowOffsetY: 0,
                    shadowColor: 'rgba(0, 0, 0, 0.1)'
                  },
                  label: {
                    position: 'inner',
                    fontSize: 11,
                    fontWeight: 'bold',
                    color: '#333',
                    formatter: '{b}'
                  },
                  labelLine: { show: false },
                  data: dataInner
                },
                {
                  name: 'Outer',
                  type: 'pie',
                  radius: ['37%', '60%'],
                  center: ['50%', '50%'],
                  startAngle: 90,
                  clockwise: false,
                  itemStyle: {
                    borderColor: '#fff',
                    borderWidth: 1,
                    shadowBlur: 2,
                    shadowColor: 'rgba(0, 0, 0, 0.1)'
                  },
                  label: {
                    show: false
                  },
                  labelLine: {
                    show: false
                  },
                  avoidLabelOverlap: false,
                  minShowLabelAngle: 0,
                  data: dataOuter
                },
                {
                  name: 'Labels',
                  type: 'pie',
                  radius: ['60%', '60%'],
                  center: ['50%', '50%'],
                  startAngle: 90,
                  clockwise: false,
                  itemStyle: { opacity: 0 }, // Invisible
                  label: {
                    position: 'outside',
                    align: 'center',
                    formatter: function (params) {
                      var map = {
                        'PowerPoint\n(20%)': 'ppt',
                        'OS & File Manager\n(20%)': 'osfm',
                        'Handwriting\n(20%)': 'hand',
                        'Adobe Premiere Pro\n(20%)': 'prem',
                        'Captcha\n(20%)': 'captcha'
                      };
                      var key = map[params.name];
                      var cleanName = params.name.split('\n')[0];
                      return '{' + key + '|}\n{val|' + cleanName + '}';
                    },
                    rich: {
                      ppt: {
                        backgroundColor: { image: 'assets/powerpoint.png' },
                        width: 160, height: 90, align: 'center', borderRadius: 4, shadowBlur: 5, shadowColor: 'rgba(0,0,0,0.2)'
                      },
                      osfm: {
                        backgroundColor: { image: 'assets/desktop.png' },
                        width: 160, height: 90, align: 'center', borderRadius: 4, shadowBlur: 5, shadowColor: 'rgba(0,0,0,0.2)'
                      },
                      hand: {
                        backgroundColor: { image: 'assets/handwriting.png' },
                        width: 160, height: 90, align: 'center', borderRadius: 4, shadowBlur: 5, shadowColor: 'rgba(0,0,0,0.2)'
                      },
                      prem: {
                        backgroundColor: { image: 'assets/premiere.png' },
                        width: 160, height: 90, align: 'center', borderRadius: 4, shadowBlur: 5, shadowColor: 'rgba(0,0,0,0.2)'
                      },
                      captcha: {
                        backgroundColor: { image: 'assets/captcha.png' },
                        width: 160, height: 90, align: 'center', borderRadius: 4, shadowBlur: 5, shadowColor: 'rgba(0,0,0,0.2)'
                      },
                      val: {
                        align: 'center',
                        fontSize: 14,
                        fontFamily: 'Inter',
                        fontWeight: 600,
                        padding: [2, 0, 0, 0],
                        color: '#333'
                      }
                    }
                  },
                  labelLine: {
                    show: true,
                    length: 20,
                    length2: 30,
                    lineStyle: { color: '#ccc', width: 2 }
                  },
                  data: dataInner
                }
              ]
            };

            var graphicItems = [
              { angle: 126, image: 'assets/powerpoint.png', label: 'PowerPoint' },
              { angle: 198, image: 'assets/desktop.png', label: 'OS & File Manager' },
              { angle: 270, image: 'assets/handwriting.png', label: 'Handwriting' },
              { angle: 342, image: 'assets/premiere.png', label: 'Adobe Premiere Pro' },
              { angle: 54, image: 'assets/captcha.png', label: 'Captcha' }
            ];

            function buildGraphics() {
              var w = myChart.getWidth();
              var h = myChart.getHeight();
              var cx = w / 2;
              var cy = h / 2;
              var radius = Math.min(w, h) * 0.42;
              var imgWidth = Math.min(Math.max(Math.min(w, h) * 0.22, 130), 170);
              var imgHeight = imgWidth * 0.56;
              var labelGap = 14;
              var captionHeight = 32; // approximate two-line height
              var graphics = [];
              var outerLabels = buildOuterSectionLabels();

              graphicItems.forEach(function (item) {
                var rad = item.angle * Math.PI / 180;
                var x = cx + radius * Math.cos(rad);
                var y = cy - radius * Math.sin(rad);
                var bottomEdge = y + imgHeight / 2 + labelGap + captionHeight;
                if (bottomEdge > h - 8) {
                  y -= (bottomEdge - (h - 8));
                }

                graphics.push({
                  type: 'group',
                  position: [x, y],
                  bounding: 'raw',
                  children: [
                    {
                      type: 'image',
                      style: {
                        image: item.image,
                        width: imgWidth,
                        height: imgHeight,
                        x: -imgWidth / 2,
                        y: -imgHeight / 2
                      },
                      z: 10
                    },
                    {
                      type: 'text',
                      style: {
                        text: item.label,
                        font: '13px Inter',
                        textAlign: 'center',
                        textVerticalAlign: 'top',
                        fill: '#1f2937',
                        width: imgWidth,
                        lineHeight: 16,
                        overflow: 'break',
                        x: 0,
                        y: imgHeight / 2 + labelGap
                      },
                      z: 11
                    }
                  ]
                });
              });

              graphics = graphics.concat(outerLabels);
              return graphics;
            }

            function buildOuterSectionLabels() {
              var seriesModel = myChart.getModel().getSeries().find(function (s) { return s.name === 'Outer'; });
              if (!seriesModel) return [];
              var data = seriesModel.getData();
              var labels = [];
              data.each(function (idx) {
                var layout = data.getItemLayout(idx);
                if (!layout || isNaN(layout.r)) return;
                var midAngle = (layout.startAngle + layout.endAngle) / 2;
                var rMid = (layout.r + layout.r0) / 2;
                var x = layout.cx + rMid * Math.cos(midAngle);
                var y = layout.cy + rMid * Math.sin(midAngle);
                labels.push({
                  type: 'text',
                  position: [x, y],
                  style: {
                    text: data.getName(idx),
                    font: '11px Inter',
                    textAlign: 'center',
                    textVerticalAlign: 'middle',
                    fill: '#111',
                    width: 90,
                    lineHeight: 14,
                    overflow: 'break'
                  },
                  z: 12
                });
              });
              return labels;
            }

            option.graphic = [];
            option && myChart.setOption(option);
            myChart.setOption({ graphic: buildGraphics() });
            window.addEventListener('resize', function () {
              myChart.resize();
              myChart.setOption({ graphic: buildGraphics() });
            });
          })();
        </script>
        <p class="chart-note">ScreenDrag domains (inner ring) and task types (outer ring) with sample UI thumbnails.</p>
      </div>
    </div>

    <div class="content-group" id="results">
      <h2 class="content-title">Results</h2>
      <p class="body-text">
        ShowUI-&pi; surpasses proprietary Gemini-2.5-CUA and open-source OpenCUA-7B on ScreenDrag online success while
        using
        far fewer parameters, and leads on captcha and handwriting tasks that need continuous actions and observations on-the-fly.
      </p>
      <div class="table-wrap">
        <p class="table-heading">Proprietary models</p>
        <table class="metrics-table">
          <thead>
            <tr>
              <th>Model</th>
              <th>Params</th>
              <th>OS</th>
              <th>PPT</th>
              <th>Premiere</th>
              <th>Captcha</th>
              <th>Handwriting</th>
              <th>Overall</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Operator</td>
              <td>NA</td>
              <td>53.47</td>
              <td>9.90</td>
              <td>2.97</td>
              <td>0.00</td>
              <td>0.00</td>
              <td>13.27</td>
            </tr>
            <tr>
              <td>Seed-1.6-Vision</td>
              <td>NA</td>
              <td>77.23</td>
              <td>3.96</td>
              <td>1.98</td>
              <td>8.91</td>
              <td>2.97</td>
              <td>19.01</td>
            </tr>
            <tr>
              <td>Gemini-2.5-CUA</td>
              <td>NA</td>
              <td>86.14</td>
              <td>20.79</td>
              <td>0.00</td>
              <td>3.96</td>
              <td>0.00</td>
              <td>22.18</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="table-wrap">
        <p class="table-heading">Open-source models</p>
        <table class="metrics-table">
          <thead>
            <tr>
              <th>Model</th>
              <th>Params</th>
              <th>OS</th>
              <th>PPT</th>
              <th>Premiere</th>
              <th>Captcha</th>
              <th>Handwriting</th>
              <th>Overall</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>UI-TARS-1.5-7B</td>
              <td>7B</td>
              <td>73.27</td>
              <td>1.98</td>
              <td>1.98</td>
              <td>7.92</td>
              <td>0.00</td>
              <td>17.03</td>
            </tr>
            <tr>
              <td>OpenCUA-32B</td>
              <td>32B</td>
              <td>97.03</td>
              <td>6.93</td>
              <td>0.00</td>
              <td>0.00</td>
              <td>0.00</td>
              <td>20.79</td>
            </tr>
            <tr>
              <td>OpenCUA-7B</td>
              <td>7B</td>
              <td>99.01</td>
              <td>4.95</td>
              <td>0.00</td>
              <td>5.94</td>
              <td>0.00</td>
              <td>21.98</td>
            </tr>
            <tr>
              <td>Qwen3-VL-32B</td>
              <td>32B</td>
              <td>83.17</td>
              <td>4.95</td>
              <td>3.96</td>
              <td>2.97</td>
              <td>0.00</td>
              <td>19.01</td>
            </tr>
            <tr>
              <td>Qwen3-VL-8B</td>
              <td>8B</td>
              <td>24.75</td>
              <td>5.94</td>
              <td>6.93</td>
              <td>0.00</td>
              <td>0.00</td>
              <td>7.52</td>
            </tr>
            <tr>
              <td>Qwen3-VL-2B</td>
              <td>2B</td>
              <td>13.86</td>
              <td>6.93</td>
              <td>2.97</td>
              <td>0.00</td>
              <td>0.00</td>
              <td>4.75</td>
            </tr>
            <tr class="highlight-row">
              <td>ShowUI-&pi;-450M</td>
              <td>0.45B</td>
              <td>13.11</td>
              <td>22.93</td>
              <td>8.64</td>
              <td>55.91</td>
              <td>34.32</td>
              <td>26.98</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="figure chart-figure">
        <div class="chart-toggle" id="online-chart-toggle">
          <button data-domain="overall" class="is-active">Overall</button>
          <button data-domain="os">OS</button>
          <button data-domain="ppt">PPT</button>
          <button data-domain="premiere">Premiere</button>
          <button data-domain="captcha">Captcha</button>
          <button data-domain="handwriting">Handwriting</button>
        </div>
        <div id="online-success-chart" class="online-success-chart"></div>
        <p class="chart-note">Online success (%) for ScreenDrag; ShowUI-&pi; is highlighted.</p>
      </div>
    </div>

    <div class="content-group" id="visualization">
      <h2 class="content-title">Visualization</h2>
      <p class="body-text">
        Real ShowUI-&pi; trajectories from the paper show continuous control across domains: rotation, captcha dialing,
        handwriting strokes, and video-editing.
      </p>
      <div class="visual-grid">
        <div class="visual-item">
          <img src="figures/showui_powerpoint_traj.png" alt="PowerPoint trajectory">
          <div class="visual-caption">PowerPoint rotation (long circular drag).</div>
        </div>
        <div class="visual-item">
          <img src="figures/showui_desktop_traj.png" alt="OS desktop trajectory">
          <div class="visual-caption">OS desktop drag-and-sort between folders.</div>
        </div>
        <div class="visual-item">
          <img src="figures/showui_captcha_traj.png" alt="Captcha trajectory">
          <div class="visual-caption">Captcha dial rotation with stable arcs.</div>
        </div>
        <div class="visual-item">
          <img src="figures/showui_handwriting_traj.png" alt="Handwriting trajectory">
          <div class="visual-caption">Handwriting strokes with minimal wobble.</div>
        </div>
        <div class="visual-item">
          <img src="figures/showui_premiere_traj.png" alt="Premiere trajectory">
          <div class="visual-caption">Premiere Pro drag-and-drop into effect stack.</div>
        </div>
      </div>
    </div>

    <div class="content-group" id="bibtex">
      <h2 class="content-title">BibTeX</h2>
      <div class="code-block">
        <pre><code>@misc{hu2025showuipi,
  title={ShowUI-$\pi$: Flow-based Generative Models as GUI Dexterous Hands},
  author={Siyuan Hu and Kevin Qinghong Lin and Mike Zheng Shou},
  year={2025},
  note={arXiv preprint},
}</code></pre>
      </div>
    </div>
  </div>

  <div class="footer-group">
    <div class="footer-content">
      <p class="footer-text">(c) 2025 Show Lab. Inspired by X-Humanoid. Template adapted from X-Humanoid and Nerfies.
      </p>
      <p class="footer-text">Licensed under CC BY-SA 4.0. If reusing this template, please keep attribution.</p>
    </div>
  </div>

  <script>
    (function () {
      if (typeof echarts === "undefined") return;
      var chartEl = document.getElementById("online-success-chart");
      if (!chartEl) return;

      var runs = [
        { name: "Operator", params: "Proprietary", os: 53.47, ppt: 9.90, premiere: 2.97, captcha: 0.00, handwriting: 0.00, overall: 13.27 },
        { name: "UI-TARS-1.5-7B", params: "7B", os: 73.27, ppt: 1.98, premiere: 1.98, captcha: 7.92, handwriting: 0.00, overall: 17.03 },
        { name: "Seed-1.6-Vision", params: "Proprietary", os: 77.23, ppt: 3.96, premiere: 1.98, captcha: 8.91, handwriting: 2.97, overall: 19.01 },
        { name: "Gemini-2.5-CUA", params: "Proprietary", os: 86.14, ppt: 20.79, premiere: 0.00, captcha: 3.96, handwriting: 0.00, overall: 22.18 },
        { name: "OpenCUA-32B", params: "32B", os: 97.03, ppt: 6.93, premiere: 0.00, captcha: 0.00, handwriting: 0.00, overall: 20.79 },
        { name: "OpenCUA-7B", params: "7B", os: 99.01, ppt: 4.95, premiere: 0.00, captcha: 5.94, handwriting: 0.00, overall: 21.98 },
        { name: "Qwen3-VL-32B", params: "32B", os: 83.17, ppt: 4.95, premiere: 3.96, captcha: 2.97, handwriting: 0.00, overall: 19.01 },
        { name: "Qwen3-VL-8B", params: "8B", os: 24.75, ppt: 5.94, premiere: 6.93, captcha: 0.00, handwriting: 0.00, overall: 7.52 },
        { name: "Qwen3-VL-2B", params: "2B", os: 13.86, ppt: 6.93, premiere: 2.97, captcha: 0.00, handwriting: 0.00, overall: 4.75 },
        { name: "ShowUI-pi-450M", params: "0.45B", os: 13.11, ppt: 22.93, premiere: 8.64, captcha: 55.91, handwriting: 34.32, overall: 26.98, ours: true },
      ];

      var palette = { baseline: "#d9d9d9", ours: "#111827", text: "#262626", grid: "#e6e6e6" };
      var activeDomain = "overall";

      function labelFor(domain) {
        switch (domain) {
          case "os": return "OS";
          case "ppt": return "PPT";
          case "premiere": return "Premiere";
          case "captcha": return "Captcha";
          case "handwriting": return "Handwriting";
          default: return "Overall";
        }
      }

      function render(domain) {
        activeDomain = domain || "overall";
        var key = activeDomain;
        var sorted = runs.slice().sort(function (a, b) { return (b[key] || 0) - (a[key] || 0); });
        var maxVal = sorted.reduce(function (m, r) {
          var v = r[key] || 0;
          return v > m ? v : m;
        }, 0);
        var axisMax = Math.ceil(maxVal / 10) * 10 + 10;

        chart.setOption({
          backgroundColor: "#ffffff",
          tooltip: {
            trigger: "item",
            backgroundColor: "#ffffff",
            borderColor: "#cccccc",
            borderWidth: 1,
            textStyle: { color: palette.text },
            formatter: function (p) {
              var row = sorted[p.dataIndex];
              return "<b>" + row.name + "</b><br/>" + labelFor(key) + ": " + (row[key] || 0).toFixed(2) + "%";
            }
          },
          grid: { left: 120, right: 20, bottom: 40, top: 10 },
          xAxis: {
            type: "value",
            max: axisMax,
            splitLine: { lineStyle: { color: palette.grid, type: "dashed" } },
            axisLabel: { color: palette.text, fontSize: 11, formatter: "{value}%" }
          },
          yAxis: {
            type: "category",
            data: sorted.map(function (r) { return r.name; }),
            axisLabel: { color: palette.text, fontSize: 11 },
            axisLine: { lineStyle: { color: palette.text } },
          },
          series: [{
            type: "bar",
            data: sorted.map(function (r) {
              return { value: r[key] || 0, itemStyle: { color: r.ours ? palette.ours : palette.baseline } };
            }),
            barWidth: "50%",
            label: {
              show: true,
              position: "right",
              color: palette.text,
              fontSize: 11,
              formatter: function (p) { return p.value.toFixed(2) + "%"; }
            }
          }]
        });
      }

      var chart = echarts.init(chartEl);
      var toggle = document.getElementById("online-chart-toggle");
      if (toggle) {
        toggle.addEventListener("click", function (ev) {
          var btn = ev.target.closest("button[data-domain]");
          if (!btn) return;
          toggle.querySelectorAll("button").forEach(function (b) { b.classList.toggle("is-active", b === btn); });
          render(btn.getAttribute("data-domain"));
        });
      }
      render(activeDomain);
      window.addEventListener("resize", function () { chart.resize(); });
    })();
  </script>
</body>

</html>
